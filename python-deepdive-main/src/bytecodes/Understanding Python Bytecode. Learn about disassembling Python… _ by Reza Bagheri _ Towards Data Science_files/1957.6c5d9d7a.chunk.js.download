(self.webpackChunklite=self.webpackChunklite||[]).push([[1957],{65331:(e,n,t)=>{"use strict";t.d(n,{a:()=>ce});var a=t(67154),i=t.n(a),r=t(6479),o=t.n(r),l=t(63038),d=t.n(l),c=t(64718),s=t(67294),u=t(59713),p=t.n(u),g=t(319),v=t.n(g),f=t(39210),m=t(65368),C=t(77355),b=t(93310),I=t(87691),y=t(14646),P=t(78285),h=t(14813),k=t(87529),O=t(61609),w=t(97217);function E(){return(E=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}var j=s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.73 3.08A2.21 2.21 0 0 1 5 .94c1.26 0 2.27.97 2.27 2.14v2.44H2.73V3.08zm5.46 2.44V3.08C8.18 1.38 6.74 0 5 0a3.13 3.13 0 0 0-3.18 3.08v2.44c-.49 0-.95.2-1.29.55A1.9 1.9 0 0 0 0 7.39v3.74a1.9 1.9 0 0 0 .53 1.32A1.8 1.8 0 0 0 1.8 13H8.2c.48 0 .94-.2 1.28-.55.34-.35.53-.82.53-1.32V7.4a1.9 1.9 0 0 0-.53-1.32 1.8 1.8 0 0 0-1.28-.55z",fill:"#A8A8A8"});const T=function(e){return s.createElement("svg",E({width:10,height:13,viewBox:"0 0 10 13",fill:"none"},e),j)};var _=t(92305),S=t(54758);function x(e){var n,t,a=e.children,i=e.target,r=e.kind,o=e.catalog,l=e.viewer,c=s.useMemo((function(){if(o.predefined){var e,n=null===(e=i.viewerEdge.catalogsConnection)||void 0===e?void 0:e.predefinedContainingThis.find((function(e){return e.predefined===o.predefined}));return[!!n,null==n?void 0:n.catalogItemIds]}var t,a=null===(t=i.viewerEdge.catalogsConnection)||void 0===t?void 0:t.catalogsContainingThis.find((function(e){return e.catalogId===o.id}));return[!!a,null==a?void 0:a.catalogItemIds]}),[o.predefined,o.id,i.viewerEdge]),u=d()(c,2),p=u[0],g=u[1],v=(0,S.qY)(l.id,o.id,o.version,i.id,r,null!==(n=o.predefined)&&void 0!==n?n:void 0),f=d()(v,2),m=f[0],C=f[1].loading,b=(0,S.Yi)(l.id,o.id,o.version,[{entityId:i.id,entityType:r,catalogItemIds:g||[]}],null!==(t=o.predefined)&&void 0!==t?t:void 0),I=d()(b,2),y=I[0],P=I[1].loading;return a({toggleInsideCatalog:p?y:m,isInsideCatalog:p,loading:C||P})}var D={display:"flex",alignItems:"center",justifyContent:"space-between",paddingBottom:"16px",paddingRight:"5px"},N=function(e){return{marginBottom:"1px","& path":{fill:e.baseColor.border.normal}}};function A(e){var n=e.catalog,t=e.target,a=e.kind,i=e.viewer,r=(0,y.I)();return s.createElement(x,{viewer:i,target:t,kind:a,catalog:n},(function(e){var t=e.toggleInsideCatalog,a=e.isInsideCatalog,i=e.loading,o=n.predefined?(0,_.S6)(n.predefined):n.name;return s.createElement("div",{className:r(D)},s.createElement(O.X,{key:n.id,checked:a,checkboxStyle:"OBVIOUS",onChange:t,disabled:i||n.visibility===w.n2.LOCKED,textScale:"L",clampText:1},o),n.visibility!==w.n2.PUBLIC&&s.createElement(C.x,{paddingLeft:"8px"},s.createElement(T,{className:r(N)})))}))}function V(e){var n=e.target,t=e.kind,a=e.catalogs,i=e.isLoading,r=e.viewer,o=e.fetchMore,l=e.scrollableEl;return i?s.createElement(C.x,{display:"flex",justifyContent:"center",padding:"40px 0"},s.createElement(I.F,{color:"DARKER",scale:"L",tag:"div"},s.createElement(k.T,null))):a?s.createElement(h.P,{fetchMore:o,scrollableEl:l},a.map((function(e){return s.createElement(A,{viewer:r,key:e.id,catalog:e,target:n,kind:t})}))):null}function R(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function M(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?R(Object(t),!0).forEach((function(n){p()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):R(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var L={maxHeight:"240px",overflowY:"auto",padding:"24px 20px 16px 24px"};function F(e){var n,t,a,i=e.target,r=e.kind,o=e.showCreateModal,l=e.hidePanel,d=e.viewer,u=s.useRef(null),p=(0,y.I)(),g=(0,f.Ln)({limit:f.W,userId:d.id}),h=(0,P.w)(),k=(0,c.a)(m.D,{variables:g}),O=k.data,w=k.error,E=k.loading,j=k.fetchMore;s.useEffect((function(){w&&h({toastStyle:"RETRYABLE_ERROR",duration:4e3})}),[w]);var T,_=s.useCallback((function(){o(),l()}),[o,l]),S=null==O?void 0:O.catalogsByUser.catalogs;return S&&"Catalog"===(null==O||null===(n=O.readingList)||void 0===n?void 0:n.__typename)&&(S=[O.readingList].concat(v()(S))),null!=O&&null!==(t=O.catalogsByUser)&&void 0!==t&&null!==(a=t.paging)&&void 0!==a&&a.nextPageCursor&&(T=function(){return j({variables:M(M({},g),{},{pagingOptions:M(M({},g.pagingOptions),{},{cursor:{id:O.catalogsByUser.paging.nextPageCursor.id}})})})}),s.createElement(C.x,{width:"300px"},s.createElement("div",{className:p(L),ref:u},s.createElement(V,{target:i,kind:r,viewer:d,catalogs:S,isLoading:E,fetchMore:T,scrollableEl:u.current})),!E&&s.createElement(C.x,{borderTop:"BASE_LIGHTER",padding:"20px 24px 24px"},s.createElement(I.F,{color:"ACCENT",scale:"L"},s.createElement(b.r,{onClick:_},"Create new list"))))}var B=t(63508),$=t(28655),H=t.n($),K=t(50361),U=t.n(K),z=t(92471),Y=t(21919),G=t(12476),Q=t(18627),q=t(11462);function J(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function W(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?J(Object(t),!0).forEach((function(n){p()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):J(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function X(){var e=H()(["\n  fragment useAddItemToPredefinedCatalog_postViewerEdge on PostViewerEdge {\n    id\n    catalogsConnection {\n      predefinedContainingThis {\n        catalogId\n        version\n        predefined\n        catalogItemIds\n      }\n    }\n  }\n"]);return X=function(){return e},e}function Z(){var e=H()(["\n  mutation AddToPredefinedCatalog(\n    $type: PredefinedCatalogType!\n    $operation: PredefinedCatalogAddOperationInput!\n  ) {\n    addToPredefinedCatalog(type: $type, operation: $operation) {\n      __typename\n      ... on AddToPredefinedCatalogSucces {\n        version\n        insertedItem {\n          __typename\n          catalogItemId\n          catalogId\n        }\n      }\n    }\n  }\n"]);return Z=function(){return e},e}var ee="temp-catalog-id",ne=(0,z.Ps)(Z()),te=(0,z.Ps)(X()),ae=t(73917),ie=t(66227),re=t(68894),oe=t(74739),le=t(62212);function de(e){var n=e.children,t=e.isPanelVisible,a=e.hidePanel,i=e.togglePanel,r=e.target,o=e.kind,l=e.viewer,c=e.bookmarkIcon,u=e.isInACatalog,p=e.isInReadingList,g=e.catalogsCount,v=e.popoverDisplay,f=(0,re.O)(!1),m=d()(f,3),C=m[0],b=m[1],I=m[2],y=function(e,n,t,a){var i=(0,Q.Av)(),r=(0,Y.D)(ne,{variables:{type:n,operation:{preprend:{type:a,id:t}}},optimisticResponse:{addToPredefinedCatalog:{__typename:"AddToPredefinedCatalogSucces",version:S.xt,insertedItem:{__typename:"CatalogItemV2",catalogId:ee,catalogItemId:S.PH}}},onCompleted:function(e){if("AddToPredefinedCatalogSucces"===e.addToPredefinedCatalog.__typename&&a===w.ej.POST){var n=e.addToPredefinedCatalog.insertedItem;i.event("post.addToList",{listId:n.catalogId,postId:n.catalogItemId})}},update:function(i,r){var o,l=null===(o=r.data)||void 0===o?void 0:o.addToPredefinedCatalog;if("AddToPredefinedCatalogSucces"===(null==l?void 0:l.__typename)){var d,c,s=l.insertedItem,u=l.version;if(s.catalogId!==ee&&((0,G.UV)(i,s.catalogId,u),(0,G.Rx)(i,s.catalogId,[s.catalogItemId],a)),a===w.ej.POST){d="PostViewerEdge:".concat((0,q.Q)(t,e)),c=te;var p=i.readFragment({id:d,fragment:c});if(null!=p&&p.catalogsConnection){var g=U()(p.catalogsConnection.predefinedContainingThis),v=g.findIndex((function(e){return e.predefined===n}));if(-1!==v)g[v].catalogItemIds.push(s.catalogItemId);else{var f={catalogId:s.catalogId,predefined:n,version:u,catalogItemIds:[s.catalogItemId]};g.push(f)}i.writeFragment({id:d,fragment:c,data:W(W({},p),{},{catalogsConnection:W(W({},p.catalogsConnection),{},{predefinedContainingThis:g})})})}}}}});return d()(r,1)[0]}(l.id,w.l8.READING_LIST,r.id,o),P=s.useCallback((function(){i(),p||u||y()}),[i,u,p,y]);return s.createElement(ae.J,{isVisible:t,popoverRenderFn:function(){return s.createElement(F,{showCreateModal:b,hidePanel:a,target:r,kind:o,viewer:l})},hide:a,targetDistance:15,display:v},s.createElement(B.a,{isVisible:C,hide:I,target:r,kind:o,viewer:l}),null==n?void 0:n({onClick:P,bookmarkIcon:c,catalogsCount:g,isPanelVisible:t}))}function ce(e){var n,t,a,r=e.viewer,l=e.defaultToBookmarkIcon,d=o()(e,["viewer","defaultToBookmarkIcon"]),u=s.useMemo((function(){return d.kind===w.ej.POST?{postId:d.target.id,isPostKind:!0}:{postId:"",isPostKind:!1}}),[d.kind,d.target]),p=(0,c.a)(oe.$l,{ssr:!1,variables:u}).data,g=null,v=null;"Post"===(null==p||null===(n=p.postResult)||void 0===n?void 0:n.__typename)&&(g=p.postResult.viewerEdge.catalogsConnection,v=p.postResult);var f=(null===(t=g)||void 0===t?void 0:t.catalogsContainingThis)&&g.catalogsContainingThis.length>0,m=s.useMemo((function(){var e,n;return!!(null===(e=g)||void 0===e||null===(n=e.predefinedContainingThis)||void 0===n?void 0:n.find((function(e){return e.predefined===w.l8.READING_LIST})))}),[g]),C=s.useMemo((function(){var e;return((null===(e=g)||void 0===e?void 0:e.catalogsContainingThis.length)||0)+(m?1:0)}),[null===(a=g)||void 0===a?void 0:a.catalogsContainingThis.length,m]),b=s.createElement(le.l,{insideACatalog:!!f||m});return u.isPostKind?r&&g&&v?s.createElement(ie.B,null,(function(e){var n=e.isVisible,t=e.toggle,a=e.hide;return s.createElement(de,i()({},d,{target:v,viewer:r,isPanelVisible:n,togglePanel:t,hidePanel:a,bookmarkIcon:b,isInACatalog:!!f,isInReadingList:m,catalogsCount:C}))})):l||!d.children?b:d.children({onClick:function(){return null},bookmarkIcon:b,catalogsCount:C,isPanelVisible:!1,isDisabled:!0}):null}},62212:(e,n,t)=>{"use strict";t.d(n,{l:()=>f,K:()=>u});var a=t(67294),i=t(14646);function r(){return(r=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}var o=a.createElement("path",{d:"M17.5 1.25a.5.5 0 0 1 1 0v2.5H21a.5.5 0 0 1 0 1h-2.5v2.5a.5.5 0 0 1-1 0v-2.5H15a.5.5 0 0 1 0-1h2.5v-2.5zm-11 4.5a1 1 0 0 1 1-1H11a.5.5 0 0 0 0-1H7.5a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4V5.75z",fill:"#000"});const l=function(e){return a.createElement("svg",r({width:24,height:24,viewBox:"0 0 24 24",fill:"none"},e),o)};function d(){return(d=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}var c=a.createElement("path",{d:"M7.5 3.75a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-14a2 2 0 0 0-2-2h-9z",fill:"#000"});const s=function(e){return a.createElement("svg",d({width:24,height:24,viewBox:"0 0 24 24",fill:"none"},e),c)};var u=function(e){return{"& path":{fill:e.baseColor.border.darker}}},p=function(e){return{"& path":{fill:e.baseColor.fill.darker}}},g=function(){var e=(0,i.I)();return a.createElement(l,{className:e(u)})},v=function(){var e=(0,i.I)();return a.createElement(s,{className:e(p)})};function f(e){return e.insideACatalog?a.createElement(v,null):a.createElement(g,null)}},13195:(e,n,t)=>{"use strict";t.d(n,{CP:()=>h});var a=t(59713),i=t.n(a),r=t(63038),o=t.n(r),l=t(28655),d=t.n(l),c=t(92471),s=t(21919),u=t(67294),p=t(11462),g=t(70836);function v(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function f(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?v(Object(t),!0).forEach((function(n){i()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):v(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function m(){var e=d()(["\n  mutation ClapMutation($targetPostId: ID!, $userId: ID!, $numClaps: Int!) {\n    clap(targetPostId: $targetPostId, userId: $userId, numClaps: $numClaps) {\n      viewerEdge {\n        ...ClapMutation_viewerEdge\n      }\n      ...ClapMutation_post\n    }\n  }\n  ","\n  ","\n"]);return m=function(){return e},e}function C(){var e=d()(["\n  fragment ClapMutation_viewerEdge on PostViewerEdge {\n    __typename\n    id\n    clapCount\n  }\n"]);return C=function(){return e},e}function b(){var e=d()(["\n  fragment ClapMutation_post on Post {\n    __typename\n    id\n    clapCount\n    ...MultiVoteCount_post\n  }\n  ","\n"]);return b=function(){return e},e}var I=(0,c.Ps)(b(),g.U),y=(0,c.Ps)(C()),P=(0,c.Ps)(m(),I,y),h=function(){var e=(0,s.D)(P),n=o()(e,1)[0];return(0,u.useCallback)((function(e,t,a,i){var r;return n({variables:{targetPostId:e.id,userId:t,numClaps:a},optimisticResponse:{clap:f(f({__typename:"Post"},e),{},{clapCount:(null!==(r=e.clapCount)&&void 0!==r?r:0)+a,viewerEdge:{__typename:"PostViewerEdge",id:(0,p.Q)(e.id,t),clapCount:a}})},update:function(n,t){var r,o,l=null==t||null===(r=t.data)||void 0===r?void 0:r.clap;if(l){var d=n.readFragment({id:"Post:".concat(l.id),fragment:I,fragmentName:"ClapMutation_post"});n.writeFragment({id:"Post:".concat(l.id),fragment:I,fragmentName:"ClapMutation_post",data:f(f({},d),{},{clapCount:(null!==(o=e.clapCount)&&void 0!==o?o:0)+a,viewerClapCount:((null==i?void 0:i.clapCount)||0)+a})})}}})}),[])}},39507:(e,n,t)=>{"use strict";t.d(n,{T:()=>r});var a=t(64718),i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PostViewerEdgeQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"post"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"clapCount"}},{kind:"Field",name:{kind:"Name",value:"readingList"}},{kind:"Field",name:{kind:"Name",value:"shareKey"}},{kind:"Field",name:{kind:"Name",value:"creatorPartnerProgramEnrollmentStatus"}}]}}]}}]}}]}}]},r=function(e){var n,t=(0,a.a)(i,{variables:{postId:(null==e?void 0:e.id)||""},ssr:!1,skip:!(null!=e&&e.id)}),r=t.loading,o=t.error,l=t.data;return r?{loading:r}:o?{error:o}:{viewerEdge:null==l||null===(n=l.post)||void 0===n?void 0:n.viewerEdge}}},51681:(e,n,t)=>{"use strict";function a(e,n,t){return!!n&&e[n.id]||{clapCount:(null==n?void 0:n.clapCount)||0,viewerClapCount:(null==t?void 0:t.clapCount)||0,viewerHasClappedSinceFetch:!1}}t.d(n,{l:()=>a})}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/1957.6c5d9d7a.chunk.js.map