(self.webpackChunklite=self.webpackChunklite||[]).push([[8],{19308:(e,n,t)=>{"use strict";t.d(n,{b:()=>a,I:()=>s});var i=t(319),r=t.n(i),l=t(68216),o=t(98007),a={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"CollectionFollowButton_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}}]}}]},s={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"CollectionFollowButton_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"FragmentSpread",name:{kind:"Name",value:"collectionUrl_collection"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SusiClickable_collection"}}]}}].concat(r()(l.nf.definitions),r()(o.Os.definitions))}},76107:(e,n,t)=>{"use strict";t.d(n,{b:()=>i});var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"MembershipUpsellModal_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"imageId"}},{kind:"Field",name:{kind:"Name",value:"postSubscribeMembershipUpsellShownAt"}},{kind:"Field",name:{kind:"Name",value:"newsletterV3"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}}]}},31579:(e,n,t)=>{"use strict";t.d(n,{DI:()=>l,nj:()=>o});var i=t(319),r=t.n(i),l={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"useNewsletterV3Subscription_newsletterV3"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NewsletterV3"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"slug"}}]}},{kind:"Field",name:{kind:"Name",value:"user"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"Field",name:{kind:"Name",value:"newsletterV3"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}}]}}]},o={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"useNewsletterV3Subscription_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"Field",name:{kind:"Name",value:"newsletterV3"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"useNewsletterV3Subscription_newsletterV3"}}]}}]}}].concat(r()(l.definitions))};[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"fetchOrLazilyCreateNewsletterV3AndMaybeSubscribe"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"userId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"fetchOrLazilyCreateNewsletterV3AndMaybeSubscribe"},arguments:[{kind:"Argument",name:{kind:"Name",value:"userId"},value:{kind:"Variable",name:{kind:"Name",value:"userId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"useNewsletterV3Subscription_newsletterV3"}}]}}]}}].concat(r()(l.definitions))},61279:(e,n,t)=>{"use strict";t.d(n,{DI:()=>x,nj:()=>C,oT:()=>M});var i=t(59713),r=t.n(i),l=t(63038),o=t.n(l),a=t(28655),s=t.n(a),u=t(82492),d=t.n(u),c=t(92471),m=t(21919),v=t(67294),b=t(25735),p=t(9354),f=t(75880),w=t(18627),k=t(66411),S=t(78285);function g(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function h(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?g(Object(t),!0).forEach((function(n){r()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function E(){var e=s()(["\n  mutation fetchOrLazilyCreateNewsletterV3AndMaybeSubscribe($userId: ID!) {\n    fetchOrLazilyCreateNewsletterV3AndMaybeSubscribe(userId: $userId) {\n      __typename\n      ...useNewsletterV3Subscription_newsletterV3\n    }\n  }\n  ","\n"]);return E=function(){return e},e}function N(){var e=s()(["\n  mutation unsubscribeNewsletterV3($newsletterV3Id: ID!) {\n    unsubscribeNewsletterV3(newsletterV3Id: $newsletterV3Id)\n  }\n"]);return N=function(){return e},e}function y(){var e=s()(["\n  mutation subscribeNewsletterV3($newsletterV3Id: ID!, $shouldRecordConsent: Boolean) {\n    subscribeNewsletterV3(\n      newsletterV3Id: $newsletterV3Id\n      shouldRecordConsent: $shouldRecordConsent\n    )\n  }\n"]);return y=function(){return e},e}function V(){var e=s()(["\n  fragment useNewsletterV3Subscription_newsletterV3_viewerEdge on NewsletterV3 {\n    viewerEdge {\n      id\n      isSubscribed\n    }\n  }\n"]);return V=function(){return e},e}function F(){var e=s()(["\n  fragment useNewsletterV3Subscription_user on User {\n    id\n    username\n    newsletterV3 {\n      ...useNewsletterV3Subscription_newsletterV3\n    }\n  }\n  ","\n"]);return F=function(){return e},e}function O(){var e=s()(["\n  fragment useNewsletterV3Subscription_newsletterV3 on NewsletterV3 {\n    id\n    type\n    slug\n    name\n    collection {\n      slug\n    }\n    user {\n      id\n      name\n      username\n      newsletterV3 {\n        id\n      }\n    }\n  }\n"]);return O=function(){return e},e}var x=(0,c.Ps)(O()),C=(0,c.Ps)(F(),x),I=((0,c.Ps)(V()),(0,c.Ps)(y())),_=(0,c.Ps)(N()),P=(0,c.Ps)(E(),x),M=function(e){var n=e.newsletterV3,t=e.creator,i=e.newsletterName,r=e.hideLinkInConfirmationToast,l=void 0!==r&&r,a=n||{},s=a.id,u=a.type,c=a.slug,g=a.collection,E=(null==n?void 0:n.user)||t,N=null!=i?i:null==n?void 0:n.name,y=v.useState(!1),V=o()(y,2),F=V[0],O=V[1],x=(0,p.T)({newsletterSlug:c,collectionSlug:null==g?void 0:g.slug,username:null==E?void 0:E.username}),M=x.viewerEdge,D=x.loading,T=(0,b.VB)({name:"enable_auto_follow_on_subscribe",placeholder:!1}),U=v.useState(!1),A=o()(U,2),L=A[0],B=A[1];v.useEffect((function(){B(!(null==M||!M.isSubscribed))}),[null==M?void 0:M.isSubscribed]);var R=(0,w.Av)(),j=(0,k.Qi)(),$=(0,S.w)();F&&R.event("newsletterV3.subscribe.error",{newsletterV3Id:s});var z=function(e,n,t){if(t){var i={id:"User:".concat(null==E?void 0:E.id),fragment:C,fragmentName:"useNewsletterV3Subscription_user"},r=e.readFragment(i);e.writeFragment(h(h({},i),{},{data:h(h({},r),{},{newsletterV3:t})}))}if(M){var l=e.readQuery({query:p.p,variables:{newsletterSlug:c,collectionSlug:null==g?void 0:g.slug,username:null==E?void 0:E.username}}),o=d()({},l,{newsletterV3:{viewerEdge:{isSubscribed:n}}});e.writeQuery({query:p.p,variables:{newsletterSlug:c||"",collectionSlug:null==g?void 0:g.slug,username:null==E?void 0:E.username},data:o})}n&&null!=E&&E.id&&T&&(0,f.I0)(e,E.id,{isFollowing:!0})},G=(0,m.D)(I,{onCompleted:function(e){var n=e.subscribeNewsletterV3;O(!n),n&&(R.event("newsletterV3.subscribeClicked",{newsletterV3Id:s,source:j}),B(!0))},update:function(e){z(e,!0)}}),H=o()(G,1)[0],W=(0,m.D)(_,{onCompleted:function(e){var n=e.unsubscribeNewsletterV3;O(!n),n&&(B(!1),$({duration:l?5e3:"NEXTPAGE",toastStyle:"NEWSLETTER_UNSUBSCRIBE",extraParams:{newsletterName:N||null,newsletterType:u||null,unsubscribeFn:function(){return B(!1)},hideEmailSettingsLink:l,hideCloseButton:l}}))},update:function(e){z(e,!1)}}),q=o()(W,1)[0],Q=(0,m.D)(P,{onCompleted:function(e){var n=e.fetchOrLazilyCreateNewsletterV3AndMaybeSubscribe;O(!n),n&&(R.event("newsletterV3.subscribeClicked",{newsletterV3Id:n.id,source:j}),B(!0))},update:function(e,n){var t,i=h({},null===(t=n.data)||void 0===t?void 0:t.fetchOrLazilyCreateNewsletterV3AndMaybeSubscribe);z(e,!0,i)}}),X=o()(Q,1)[0];return{isSubscribed:L,hasError:F,setSubscribe:function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];O(!1),e&&!n&&null!=t&&t.id?X({variables:{userId:null==t?void 0:t.id}}):e&&null!=n&&n.id?H({variables:{newsletterV3Id:null==n?void 0:n.id,shouldRecordConsent:i}}):null!=n&&n.id?q({variables:{newsletterV3Id:null==n?void 0:n.id}}):O(!0)},loading:D}}},67701:(e,n,t)=>{"use strict";t.d(n,{gY:()=>u});var i=t(28655),r=t.n(i),l=t(64718),o=t(92471);function a(){var e=r()(["\n  query CollectionViewerEdge($collectionId: ID!) {\n    collection(id: $collectionId) {\n      ... on Collection {\n        id\n        viewerEdge {\n          ...Collection_viewerEdge\n        }\n      }\n    }\n  }\n  ","\n"]);return a=function(){return e},e}function s(){var e=r()(["\n  fragment Collection_viewerEdge on CollectionViewerEdge {\n    id\n    canEditOwnPosts\n    canEditPosts\n    isEditor\n    isFollowing\n    isMuting\n    isSubscribedToLetters\n    isSubscribedToMediumNewsletter\n    isSubscribedToEmails\n    isWriter\n  }\n"]);return s=function(){return e},e}var u=function(e){var n,t,i=(0,l.a)(c,{variables:{collectionId:null!==(n=null==e?void 0:e.id)&&void 0!==n?n:""},ssr:!1,skip:!(null!=e&&e.id)}),r=i.loading,o=i.error,a=i.data;return r?{loading:r}:o?{error:o}:{viewerEdge:null==a||null===(t=a.collection)||void 0===t?void 0:t.viewerEdge}},d=(0,o.Ps)(s()),c=(0,o.Ps)(a(),d)},9354:(e,n,t)=>{"use strict";t.d(n,{T:()=>s,p:()=>u});var i=t(28655),r=t.n(i),l=t(64718),o=t(92471);function a(){var e=r()(["\n  query NewsletterV3ViewerEdge($newsletterSlug: ID!, $collectionSlug: ID, $username: ID) {\n    newsletterV3(\n      newsletterSlug: $newsletterSlug\n      collectionSlug: $collectionSlug\n      username: $username\n    ) {\n      ... on NewsletterV3 {\n        id\n        viewerEdge {\n          id\n          isSubscribed\n        }\n      }\n    }\n  }\n"]);return a=function(){return e},e}var s=function(e){var n,t=e.newsletterSlug,i=void 0===t?"":t,r=e.collectionSlug,o=e.username,a=(0,l.a)(u,{variables:{newsletterSlug:i,collectionSlug:r,username:o},ssr:!1,skip:!i&&!o}),s=a.loading,d=a.error,c=a.data;return s?{loading:s}:d?{error:d}:{viewerEdge:null==c||null===(n=c.newsletterV3)||void 0===n?void 0:n.viewerEdge}},u=(0,o.Ps)(a())},25267:(e,n,t)=>{"use strict";t.d(n,{I:()=>r});var i=t(6443),r=function(e){var n=e.children,t=e.nonBlocking,r=(0,i.H)(),l=r.error,o=r.loading,a=r.value;return t&&(l||o)?n(null):o?null:n(a)}},43822:(e,n,t)=>{"use strict";t.d(n,{H:()=>k,a:()=>S});var i=t(28655),r=t.n(i),l=t(59713),o=t.n(l),a=t(92471),s=t(67294),u=t(27517),d=t(47230),c=t(93310),m=t(18627),v=t(66411),b=t(50458);function p(){var e=r()(["\n  fragment UpsellClickable_post on Post {\n    id\n    collection {\n      id\n    }\n    sequence {\n      sequenceId\n    }\n    creator {\n      id\n    }\n  }\n"]);return p=function(){return e},e}function f(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function w(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?f(Object(t),!0).forEach((function(n){o()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var k=(0,a.Ps)(p()),S=(0,u.$j)((function(e){return{authDomain:e.config.authDomain}}))((function(e){var n=e.authDomain,t=e.buttonSize,i=e.buttonStyle,r=e.children,l=e.eventData,o=void 0===l?{}:l,a=e.inline,u=void 0!==a&&a,p=e.isButton,f=void 0!==p&&p,k=e.linkStyle,S=void 0===k?"SUBTLE":k,g=e.post,h=e.redirectUrl,E=e.width,N=e.id,y=e.onClick,V=h||(0,b.OA)(n),F=(0,m.Av)(),O=(0,v.Lk)(),x=function(){var e,n;F.event("upsell.clicked",w(w({},o),{},{dimension:null==O?void 0:O.dimension,locationId:null==O?void 0:O.dimension,postId:null==g?void 0:g.id,authorId:null==g||null===(e=g.creator)||void 0===e?void 0:e.id,sequenceId:(null==g||null===(n=g.sequence)||void 0===n?void 0:n.sequenceId)||""}))};return f?s.createElement(d.z,{buttonStyle:i,href:V,onClick:function(){null==y||y(),x()},size:t,width:E,id:N},r):s.createElement(c.r,{onClick:function(){null==y||y(),x()},href:V,linkStyle:S,inline:u,id:N},r)}))},24330:(e,n,t)=>{"use strict";t.d(n,{N:()=>u});var i=t(63038),r=t.n(i),l=t(67294),o=t(32317),a=t(69116),s=t(77355),u=function(e){var n=e.creator,t=e.followButtonSize,i=void 0===t?"REGULAR":t,u=e.shouldHideTooltip,d=void 0!==u&&u,c=e.post,m=e.showMembershipUpsellModal,v=e.susiEntry,b=e.isVisible,p=e.width,f=e.isSubscribeCompact,w=void 0!==f&&f,k=l.useState(!1),S=r()(k,2),g=S[0],h=S[1];return l.createElement(l.Fragment,null,l.createElement(o.Bv,{buttonSize:i,onClick:function(){n.viewerEdge.isFollowing||h(!0)},post:c,user:n,susiEntry:v,width:p}),l.createElement(s.x,{marginLeft:w?"4px":"8px"},l.createElement(a.X,{user:n,showMembershipUpsellModal:m,showPostFollowSubscribeTooltip:g&&!d,hidePostFollowSubscribeTooltip:function(){return h(!1)},isVisible:b,isCompact:w})))}},27048:(e,n,t)=>{"use strict";t.d(n,{W:()=>o});var i=t(319),r=t.n(i),l=t(68216),o={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"UserAvatar_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"imageId"}},{kind:"Field",name:{kind:"Name",value:"mediumMemberAt"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"FragmentSpread",name:{kind:"Name",value:"userUrl_user"}}]}}].concat(r()(l.$m.definitions))}},69116:(e,n,t)=>{"use strict";t.d(n,{X:()=>ae,w:()=>se});var i=t(28655),r=t.n(i),l=t(63038),o=t.n(l),a=t(92471),s=t(67294),u=t(21919),d={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UpdateUserPostSubscribeMembershipUpsellShownAt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userUpdatePostSubscribeMembershipUpsellShownAt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"postSubscribeMembershipUpsellShownAt"}}]}}]}}]},c=t(6443),m=t(14818),v=t(13791),b=t(77355),p=t(54945),f=t(87691),w=t(18627),k=t(66411),S=t(43487),g=t(87498),h=t(78870),E=t(50458),N="after_subscribe_membership_upsell",y=function(e){var n=e.user,t=e.isVisible,i=e.hide,r=(0,S.v9)((function(e){return e.config.authDomain})),l=(0,w.Av)(),a=(0,c.H)(),y=a.value,V=a.loading;s.useEffect((function(){var e;V||null!=y&&y.postSubscribeMembershipUpsellShownAt||(l.event("newsletterV3.postSubscribeMembershipUpsellViewed",{newsletterV3Id:null===(e=n.newsletterV3)||void 0===e?void 0:e.id,source:N}),O())}),[V]);var F=(0,u.D)(d,{optimisticResponse:{userUpdatePostSubscribeMembershipUpsellShownAt:{__typename:"User",id:(null==y?void 0:y.id)||"",postSubscribeMembershipUpsellShownAt:(new Date).getTime()}}}),O=o()(F,1)[0];return s.createElement(k.cW,{source:{name:N}},s.createElement(v.v,{isVisible:t,hide:i,withCloseButton:!0,withAnimation:!0,buttonStyle:"STRONG",buttonSize:"REGULAR",cancelText:"Not now",confirmText:"Become a member",onConfirm:function(){var e,t;l.event("newsletterV3.postSubscribeMembershipUpsellClicked",{newsletterV3Id:null===(e=n.newsletterV3)||void 0===e?void 0:e.id,source:N}),t=(0,h.Rk)((0,E.c5)(r),{subscribeToUserId:n.id,source:N}),window.location.href=t},showCancelButton:!0,isDestructiveAction:!1},s.createElement(b.x,{marginBottom:"24px"},s.createElement(m.z,{miroId:n.imageId||g.gG,alt:n.name||"",diameter:80,freezeGifs:!1})),s.createElement(b.x,{marginBottom:{xs:"8px",sm:"8px",md:"16px",lg:"16px",xl:"16px"}},s.createElement(p.H2,{scale:{xs:"S",sm:"S",md:"L",lg:"L",xl:"L"}},"You’re subscribed to get email updates. Become a member for more.")),s.createElement(b.x,{marginBottom:"32px"},s.createElement(f.F,{tag:"span",scale:{xs:"M",sm:"M",md:"L",lg:"L",xl:"L"},color:"DARKER"},"Your membership fee directly supports ",n.name," and other writers you read. Get full access to every story on Medium."))))},V=t(76107),F=t(77280),O=t(61279),x=t(93661),C=t(98863),I=t(26350),_=t(43822),P=t(47230),M=t(73917),D=t(26244),T=t(1383),U=t(14646),A=t(31889),L=t(34135),B=t(97217),R=t(78285);function j(){return(j=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)}var $=s.createElement("path",{d:"M14 7.29L15.6 9 18 6M11.62 7.04H7a1 1 0 0 0-1 1v7.13a1 1 0 0 0 1 1h8.54a1 1 0 0 0 1-1v-3.21"}),z=s.createElement("path",{d:"M6 8.44l5.27 3.87 1.4-1.06.7-.52"});const G=function(e){return s.createElement("svg",j({width:23,height:23,viewBox:"0 0 23 23",fill:"none"},e),$,z)};function H(){return(H=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)}var W=s.createElement("path",{d:"M24 13l2 2 3-3.5M19.5 12.5h-7a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1v-5"}),q=s.createElement("path",{d:"M11.5 14.5L19 20l4-3"});const Q=function(e){return s.createElement("svg",H({width:38,height:38,viewBox:"0 0 38 38",fill:"none"},e),W,q)};function X(){return(X=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)}var Y=s.createElement("path",{d:"M14.58 6.89h3.92M16.39 9V5.08M11.62 7.04H7a1 1 0 0 0-1 1v7.13a1 1 0 0 0 1 1h8.54a1 1 0 0 0 1-1v-3.21"}),K=s.createElement("path",{d:"M6 8.44l5.27 3.87 2.81-2.11"});const J=function(e){return s.createElement("svg",X({width:23,height:23,viewBox:"0 0 23 23",fill:"none"},e),Y,K)};function Z(){return(Z=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)}var ee=s.createElement("rect",{x:26.25,y:9.25,width:.5,height:6.5,rx:.25}),ne=s.createElement("rect",{x:29.75,y:12.25,width:.5,height:6.5,rx:.25,transform:"rotate(90 29.75 12.25)"}),te=s.createElement("path",{d:"M19.5 12.5h-7a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1v-5"}),ie=s.createElement("path",{d:"M11.5 14.5L19 20l4-3"});const re=function(e){return s.createElement("svg",Z({width:38,height:38,viewBox:"0 0 38 38",fill:"none"},e),ee,ne,te,ie)};var le=t(68894);function oe(){var e=r()(["\n  fragment UserSubscribeButton_user on User {\n    id\n    isPartnerProgramEnrolled\n    name\n    viewerEdge {\n      id\n      isFollowing\n      isUser\n    }\n    viewerIsUser\n    newsletterV3 {\n      id\n      ...useNewsletterV3Subscription_newsletterV3\n    }\n    ...useNewsletterV3Subscription_user\n    ...MembershipUpsellModal_user\n  }\n  ","\n  ","\n  ","\n"]);return oe=function(){return e},e}var ae=function(e){var n=e.user,t=e.showMembershipUpsellModal,i=void 0!==t&&t,r=e.showPostFollowSubscribeTooltip,l=void 0!==r&&r,a=e.hidePostFollowSubscribeTooltip,u=e.isVisible,d=void 0===u||u,m=e.isCompact,v=void 0!==m&&m,p=s.useRef(null),g=(0,U.I)(),N=(0,A.F)(),V=(0,c.H)().value,j=(0,le.O)(!1),$=o()(j,3),z=$[0],H=$[1],W=$[2],q=n.newsletterV3,X=(0,R.w)(),Y=(0,w.Av)(),K=(0,k.pK)(),Z=(0,k.Qi)(),ee=(0,F.PM)(),ne=(0,O.oT)({newsletterV3:q,creator:n,newsletterName:n.name||void 0}),te=ne.isSubscribed,ie=ne.hasError,oe=ne.loading,ae=ne.setSubscribe,se=(0,S.v9)((function(e){return e.config.authDomain})),ue=(0,h.Rk)((0,E.c5)(se),{subscribeToUserId:n.id,source:Z}),de=!(null==V||!V.mediumMemberAt),ce=s.useState(!1),me=o()(ce,2),ve=me[0],be=me[1],pe=s.useState(!1),fe=o()(pe,2),we=fe[0],ke=fe[1],Se=(0,k.P7)(ee||"").susiEntry,ge=void 0===Se?"":Se,he=["newsletter_v3_promo","writer_subscription_landing"].includes(ge),Ee=["newsletter_v3_promo"].includes(ge),Ne=(0,x.OS)({membershipType:x.FM.Monthly}),ye=!1,Ve=function(){var e;!ye&&d&&Fe()&&(Y.event("newsletterV3.subscribePresented",{newsletterV3Id:(null===(e=n.newsletterV3)||void 0===e?void 0:e.id)||"",source:K}),ye=!0)},Fe=function(){var e;if(!p.current)return!1;var n=null===(e=p.current)||void 0===e?void 0:e.getBoundingClientRect(),t=n.top+n.height/2;return t>=0&&t<=window.innerHeight};s.useEffect((function(){return Ve(),window&&L.V6.on("scroll",Ve),function(){L.V6.off("scroll",Ve)}}),[]),s.useEffect((function(){Ve()}),[d]);var Oe=(0,le.O)(!1),xe=o()(Oe,3),Ce=xe[0],Ie=xe[1],_e=xe[2],Pe=function(e,n){var t=(0,c.H)(),i=t.value,r=t.loading,l=s.useRef(null),o=!(null==i||!i.mediumMemberAt),a=(0,F.PM)(),u=(0,k.P7)(a||"").susiEntry,d=["newsletter_v3_promo","writer_subscription_landing","subscribe_user"].includes(void 0===u?"":u);if(r)return!1;if(null!==l.current)return l.current;var m=d&&!o&&!e.viewerEdge.isUser&&!!e.isPartnerProgramEnrolled&&!(null!=i&&i.postSubscribeMembershipUpsellShownAt);return l.current=m,m}(n),Me=s.useState(!1),De=o()(Me,2),Te=De[0],Ue=De[1];s.useEffect((function(){i&&te&&!Te&&Pe?Ie():_e()}),[te,Te,Pe]),s.useEffect((function(){ee&&!Pe&&he&&te&&(!Ee&&Z===ge||Ee)&&X({duration:"NEXTPAGE",toastStyle:"NEWSLETTER_SUBSCRIBE",extraParams:{newsletterName:n.name,newsletterType:B.Rr.NEWSLETTER_TYPE_AUTHOR,unsubscribeFn:function(){return ae(!1)}}})}),[ee,te]),s.useEffect((function(){if(te&&we&&q){var e=!de&&!!n.isPartnerProgramEnrolled;e&&Y.event("newsletterV3.postSubscribeMembershipUpsellViewed",{newsletterV3Id:q.id,source:Z}),be(e),ke(!1)}}),[te,we,q]);var Ae=(0,C.f)().isWorkingPreview;if(ie||n.viewerEdge.isUser&&!Ae)return null;var Le,Be=te?"OBVIOUS":"STRONG",Re=function(e,n){return function(t){return{stroke:n?t.baseColor.background.normal:e,height:v?"23px":"36px",width:v?"23px":"36px"}}},je=g(Re(N.accentColor.fill.normal,oe)),$e=g(Re(N.accentColor.background,oe));Le=te?v?s.createElement(G,{className:je}):s.createElement(Q,{className:je}):v?s.createElement(J,{className:$e}):s.createElement(re,{className:$e});var ze=s.createElement(P.z,{loading:oe,buttonStyle:Be,onClick:function(){var e;ke(!te),V?te?ae(!1):V&&V.allowEmailAddressSharingEditorWriter?ae(!0,!1):H():null!==(e=n.newsletterV3)&&void 0!==e&&e.id?Y.event("newsletterV3.subscribeClicked",{newsletterV3Id:n.newsletterV3.id,source:Z}):Y.event("user.LOSubscribeClicked",{targetUserId:n.id,source:Z})},padding:"0","aria-label":"Subscribe"},Le),Ge=function(){return s.createElement(b.x,{padding:"14px 12px 20px",maxWidth:"220px"},s.createElement(f.F,{tag:"div",scale:"S",color:"DARKER"},s.createElement("strong",null,"You're subscribed to ",n.name,". Become a member for more.")," Get full access to every story on Medium for ",Ne," a month."),s.createElement(b.x,{paddingTop:"8px"},s.createElement(_.a,{isButton:!0,buttonStyle:"STRONG",buttonSize:"SMALL",redirectUrl:ue,width:"150px",onClick:function(){Y.event("newsletterV3.postSubscribeMembershipUpsellClicked",{newsletterV3Id:q.id,source:Z})}},s.createElement(b.x,{textAlign:"center"},s.createElement(f.F,{scale:"S",color:"WHITE"},"Become a member")))))},He=function(){return s.createElement(b.x,{padding:"10px 12px",maxWidth:"166px"},s.createElement(f.F,{tag:"div",scale:"S",color:"DARKER"},"Subscribe to get an email whenever ",n.name," publishes."))},We=function(e){var n=e.children;return s.createElement(M.J,{isVisible:!!a&&!te,hide:a,placement:"bottom",popoverRenderFn:He,targetDistance:10,role:"tooltip"},n)},qe=function(e){var n=e.children;return s.createElement(M.J,{isVisible:!oe&&ve,hide:function(){return be(!1)},placement:"bottom",popoverRenderFn:Ge,targetDistance:10,role:"tooltip"},n)},Qe=function(e){var n=e.children;return s.createElement(D.$,{isVisible:!oe&&!te,hideOnClick:!0,noPortal:!0,mouseEnterDelay:500,mouseLeaveDelay:0,placement:"bottom",popoverRenderFn:He,role:"tooltip",targetDistance:10},n)},Xe=function(e){var n=e.children;return l&&!te?s.createElement(We,null,n):ve?s.createElement(qe,null,n):s.createElement(Qe,null,n)};return s.createElement("div",{ref:p},s.createElement(Xe,null,s.createElement(b.x,null,V&&s.createElement(T.Q,{onConfirm:function(){ae(!0,!0)},isVisible:z,hide:W,titleText:"Confirm your subscription to ".concat(n.name),confirmText:"Confirm now",buttonStyle:"STRONG",buttonSize:"LARGE",showCancelButton:!1,withCloseButton:!1,isDestructiveAction:!1},"When you subscribe to a writer or publication, your email address will be shared with them so they can stay in contact with you outside of Medium. Opt out any time by unsubscribing in Settings."),V?ze:s.createElement(I.R,{operation:"register",newsletterV3:q,user:n,actionUrl:q?(0,E.Zu)(q.id):(0,E.lc)(n.id),susiEntry:"subscribe_user"},ze))),Ce&&s.createElement(y,{user:n,isVisible:Ce,hide:function(){Ue(!0),_e()}}))},se=(0,a.Ps)(oe(),O.DI,O.nj,V.b)},1383:(e,n,t)=>{"use strict";t.d(n,{Q:()=>m});var i=t(67154),r=t.n(i),l=t(6479),o=t.n(l),a=t(67294),s=t(77355),u=t(20113),d=t(87691),c=t(13791),m=function(e){var n=e.children,t=e.titleText,i=o()(e,["children","titleText"]),l="confirmDialogTitle";return a.createElement(c.v,r()({},i,{ariaLabelledBy:l}),a.createElement(u.X6,{ariaLabelledById:l,scale:{xs:"M",sm:"M",md:"L",lg:"L",xl:"L"}},t),a.createElement(s.x,{paddingTop:"6px",paddingBottom:"36px"},a.createElement(d.F,{scale:{xs:"M",sm:"M",md:"L",lg:"L",xl:"L"},tag:"div"},n)))}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/8.5980bcd4.chunk.js.map